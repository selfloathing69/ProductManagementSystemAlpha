# ## јрхитектурна€ диаграмма MVP v4.0

## ѕолна€ архитектура системы

```
##############################################################################
#                        ј¬“ќ«јѕ”— ј≈ћџ≈ ЁЋ≈ћ≈Ќ“џ (4)                         #
##############################################################################

    ################   ################   ################   ################
    #  Presenter   #   #  ConsoleApp  #   # WinFormsApp  #   #   WpfApp     #
    #   (Main) #  #   # (Text Menu)  #   # (Standalone) #   # (Alternative)#
    ################   ################   ################   ################
           #                  #                  #                  #
           #                  #                  #                  #
           ##########################################################
                                     #
                                     #
                    ##################################
                    #     ј–’»“≈ “”–Ќџ≈ —Ћќ»         #
                    ##################################


###############################################################################
#                              MVP ј–’»“≈ “”–ј                                 #
###############################################################################

              ####################################
              #        PRESENTER LAYER           #
              #  ProductManagementSystem.        #
              #         Presenter                #
              #                                  #
              #  Х Program.cs (Entry Point)      #
              #  Х CompositionRoot.cs (DI)       #
              #                                  #
              #  —в€зывает View # Model         #
              ####################################
                         #           #
              ################### #####################
              #   VIEW LAYER    # #   MODEL LAYER     #
              #   (Passive)     # #   (Active)        #
              ################### #####################


###############################################################################
#                             VIEW LAYER (ѕассивна€)                          #
###############################################################################

              ####################################
              #  ProductManagementSystem.        #
              #       WinFormsApp                #
              #                                  #
              #  Х MainForm.cs (IProductView)    #
              #  Х AddProductForm.cs             #
              #    (IAddProductView)             #
              #  Х WinFormsRunner.cs             #
              #                                  #
              #  “олько отображение данных!      #
              ####################################
                             #
                             # –еализует интерфейсы
                             #
              ####################################
              #  ProductManagementSystem.        #
              #         Shared                   #
              #                                  #
              #  Х IProductView                  #
              #  Х IAddProductView               #
              #  Х ProductDto                    #
              #                                  #
              #  »збегаем циклических ссылок     #
              ####################################


###############################################################################
#                           MODEL + PRESENTER LOGIC                            #
###############################################################################

              ####################################
              #  ProductManagementSystem.        #
              #         Logic                    #
              #                                  #
              #  PRESENTERS (слушают View):      #
              #  Х ProductPresenter              #
              #  Х AddProductPresenter           #
              #                                  #
              #  MODEL (активна€):               #
              #  Х IProductModel                 #
              #  Х ProductModelMvp               #
              #                                  #
              #  BUSINESS LOGIC:                 #
              #  Х ProductLogic                  #
              #  Х BusinessFunctions             #
              #                                  #
              #  SERVICES:                       #
              #  Х ProductService                #
              #  Х ProductValidator              #
              #  Х ProductMapper                 #
              ####################################
                             #
                             # »спользует
                             #
              ####################################
              #  ProductManagementSystem.        #
              #         Model                    #
              #                                  #
              #  DOMAIN OBJECTS:                 #
              #  Х Product (Entity)              #
              #  Х ProductModel (DTO)            #
              #  Х IDomainObject                 #
              ####################################
                             #
                             #
              ####################################
              #  ProductManagementSystem.        #
              #      DataAccessLayer             #
              #                                  #
              #  REPOSITORIES:                   #
              #  Х IRepository<T>                #
              #  Х EntityRepository<T> (EF Core) #
              #  Х DapperRepository<T> (Dapper)  #
              #                                  #
              #  OBSOLETE:                       #
              #  Х SimpleConfigModule ##         #
              ####################################
                             #
                             #
              ####################################
              #         DATABASE                 #
              #                                  #
              #  Х products.db (SQLite)          #
              ####################################


###############################################################################
#                      ƒќѕќЋЌ»“≈Ћ№Ќџ≈ ЁЋ≈ћ≈Ќ“џ                                 #
###############################################################################

              ####################################
              #  ProductManagementSystem.        #
              #       ConsoleApp                 #
              #                                  #
              #  Х Program.cs                    #
              #  Х MenuController.cs             #
              #  Х CompositionRoot.cs            #
              #                                  #
              #  Ќезависимое консольное          #
              #  приложение с текстовым меню     #
              ####################################

              ####################################
              #  ProductManagementSystem.        #
              #         WpfApp                   #
              #                                  #
              #  јльтернативный UI на WPF        #
              ####################################


###############################################################################
#                         √–ј‘ «ј¬»—»ћќ—“≈…                                    #
###############################################################################

Presenter ########## Logic
                #### WinFormsApp
                #### DataAccessLayer
                #### Model
                #### Shared

ConsoleApp ######### Logic
                #### DataAccessLayer
                #### Model

WinFormsApp ######## Logic
                #### Shared

Logic ############## Model
                #### DataAccessLayer
                #### Shared

DataAccessLayer #### Model

WpfApp ############### (Independent)


###############################################################################
#                      —ќќ“¬≈“—“¬»≈ ѕ–»Ќ÷»ѕјћ SOLID                            #
###############################################################################

#############################################################################
# S  # Single Responsibility        #  аждый класс - одна ответственность   #
#############################################################################
# O  # Open/Closed                  # –асширение через интерфейсы и DI      #
#############################################################################
# L  # Liskov Substitution          # EntityRepository # DapperRepository   #
#############################################################################
# I  # Interface Segregation        # IProductView, IAddProductView         #
#############################################################################
# D  # Dependency Inversion         # Ninject DI Container                  #
#############################################################################


###############################################################################
#                     ѕќ“ќ  ¬џѕќЋЌ≈Ќ»я MVP (Presenter)                         #
###############################################################################

1. ѕользователь запускает: Presenter.exe
                              #
2. Presenter создает:         #
   Х DI Container             #
   Х Model (через DI)    ###############
   Х View (MainForm)     #  Presenter  #
                         #  Program.cs #
                         ###############
                                #
                    #########################
                    #                       #
             ###############        ##############
3. —оздает:  #    View     #        #   Model    #
             #  MainForm   #        # IProduct   #
             #             #        #   Model    #
             ###############        ##############
                    #                      #
                    #                      #
4. —оздает:  #####################################
             #      ProductPresenter              #
             #  Х ѕодписываетс€ на View событи€   #
             #  Х —лушает Model событи€           #
             #  Х ”правл€ет взаимодействием       #
             ######################################

5. View генерирует событи€ # Presenter обрабатывает # Model выполн€ет
   Model измен€етс€ # Events # Presenter обновл€ет # View отображает
```

---

## ##  лючевые особенности архитектуры

### # MVP Pattern
- Presenter - св€зывает View и Model
- View - пассивна€, только UI
- Model - активна€, бизнес-логика

### # Dependency Injection
- Ninject контейнер
- CompositionRoot в Presenter
- Ћегкое переключение реализаций

### # Separation of Concerns
- 4 автозапускаемых проекта
- 8 слоев архитектуры
- Ќет циклических зависимостей

### # SOLID Principles
- ¬се 5 принципов соблюдены
- »нтерфейсы везде
- »нверси€ зависимостей
